<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>çŸ¥è¯†åº“</title>
    <meta name="description" content="çŸ¥è¯†åº“">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/myKMS/assets/style.y31ZBR2r.css" as="style">
    <link rel="preload stylesheet" href="/myKMS/vp-icons.css" as="style">
    
    <script type="module" src="/myKMS/assets/app.B5mT9e_X.js"></script>
    <link rel="preload" href="/myKMS/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/myKMS/assets/chunks/theme.BceQxUf_.js">
    <link rel="modulepreload" href="/myKMS/assets/chunks/framework.L9hZw9cv.js">
    <link rel="modulepreload" href="/myKMS/assets/knowledge_base_nodejs.md.B2Ragjo6.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><!----><!--teleport anchor-->
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-d5bf7c8e><div class="VPNavBar" data-v-d5bf7c8e data-v-8eab0e6d><div class="wrapper" data-v-8eab0e6d><div class="container" data-v-8eab0e6d><div class="title" data-v-8eab0e6d><div class="VPNavBarTitle has-sidebar" data-v-8eab0e6d data-v-d4488dd0><a class="title" href="/myKMS/" data-v-d4488dd0><!--[--><!--]--><!----><span data-v-d4488dd0>çŸ¥è¯†åº“</span><!--[--><!--]--></a></div></div><div class="content" data-v-8eab0e6d><div class="content-body" data-v-8eab0e6d><!--[--><!--[--><!--[--><div class="random-question random-question--nav" data-v-4e1b7e9a><button type="button" class="random-question__trigger random-question__trigger--nav" data-v-4e1b7e9a> ğŸ¯ éšæœºä¸€é¢˜ </button><!--teleport start--><!--teleport end--></div><!--]--><!--]--><!--]--><div class="VPNavBarSearch search" data-v-8eab0e6d><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8eab0e6d data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/interview/code.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>é¢è¯•</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/knowledge/framework/react.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>æ¡†æ¶</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/knowledge/browser/http.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>æµè§ˆå™¨</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8eab0e6d data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8eab0e6d data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xingyuanlong/myKMS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8eab0e6d data-v-f953d92f data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xingyuanlong/myKMS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8eab0e6d data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-8eab0e6d><div class="divider-line" data-v-8eab0e6d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-5ae341c6><div class="container" data-v-5ae341c6><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5ae341c6><span class="vpi-align-left menu-icon" data-v-5ae341c6></span><span class="menu-text" data-v-5ae341c6>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5ae341c6 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-e0eef791><div class="curtain" data-v-e0eef791></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e0eef791><span class="visually-hidden" id="sidebar-aria-label" data-v-e0eef791> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>åŸºç¡€çŸ¥è¯†</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/js.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/nodejs.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>node</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/css.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>css</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>interview</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/2025.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>2025</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/code.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>å¼€æ”¾æ€§é—®é¢˜</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>æ¡†æ¶</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/react.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>react</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/vue.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/vite.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>å·¥ç¨‹åŒ–</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/electron.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>electron</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>æµè§ˆå™¨</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>browser</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/http.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>http</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/webSecurity.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>webå®‰å…¨</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>è¯»ä¹¦ç¬”è®°</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/book/vue_1.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>vue.js è®¾è®¡ä¸å®è·µ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>ç®—æ³•</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/algorithm/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>æ€»</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>AI</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/ai/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>ai</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>é¡µé¢å¯¼èˆª</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _myKMS_knowledge_base_nodejs" data-v-d668f7cc><div><h3 id="_1-node-ä¸­-require-æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ" tabindex="-1">1.Node ä¸­ require æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ? <a class="header-anchor" href="#_1-node-ä¸­-require-æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ" aria-label="Permalink to â€œ1.Node ä¸­ require æ—¶å‘ç”Ÿäº†ä»€ä¹ˆ?â€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>è·¯å¾„è§£æ =&gt; ç¼“å­˜æ£€æŸ¥ =&gt; åˆ›å»ºæ¨¡å—å¯¹è±¡ =&gt; è¯»å–ä¸ç¼–è¯‘ =&gt; æ‰§è¡Œæ¨¡å—ä»£ç  =&gt; æ ‡è®°å®Œæˆå¹¶è¿”å›</p><p>require() ç¼“å­˜æ£€æŸ¥é¡ºåºï¼š</p><ul><li><ol><li>æ£€æŸ¥åŸç”Ÿæ¨¡å—ç¼“å­˜;</li></ol></li><li><ol start="2"><li>æ£€æŸ¥ require.cacheï¼ˆè·¯å¾„è§£æåçš„ç»å¯¹è·¯å¾„ä½œä¸º keyï¼‰ã€‚</li></ol></li><li><ol start="3"><li>å¦‚æœç¼“å­˜æœªå‘½ä¸­ â†’ èµ°æ¨¡å—è§£æ;</li></ol></li><li><ol start="4"><li>æ‰§è¡Œæ¨¡å—ï¼Œå¡«å…… require.cacheï¼Œè¿”å› module.exportsã€‚</li></ol></li></ul><!--]--></div></div><h3 id="_2-node-js-äº‹ä»¶å¾ªç¯æœºåˆ¶" tabindex="-1">2.Node.js äº‹ä»¶å¾ªç¯æœºåˆ¶ <a class="header-anchor" href="#_2-node-js-äº‹ä»¶å¾ªç¯æœºåˆ¶" aria-label="Permalink to â€œ2.Node.js äº‹ä»¶å¾ªç¯æœºåˆ¶â€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>å…­ä¸ªé˜¶æ®µ:</p><ol><li>Timersï¼ˆè®¡æ—¶å™¨é˜¶æ®µï¼‰æ‰§è¡Œ setTimeout() å’Œ setInterval() çš„å›è°ƒ</li><li>Pending callbacksï¼ˆå¾…å®šå›è°ƒé˜¶æ®µï¼‰æ‰§è¡Œç³»ç»Ÿæ“ä½œçš„å›è°ƒï¼Œå¦‚ TCP é”™è¯¯</li><li>Idle, prepareï¼ˆé—²ç½®å‡†å¤‡é˜¶æ®µï¼‰å†…éƒ¨ä½¿ç”¨é˜¶æ®µ</li><li>Pollï¼ˆè½®è¯¢é˜¶æ®µï¼‰ - æœ€é‡è¦çš„é˜¶æ®µ æ£€ç´¢æ–°çš„ I/O äº‹ä»¶ï¼Œæ‰§è¡Œ I/O ç›¸å…³å›è°ƒ</li><li>Checkï¼ˆæ£€æŸ¥é˜¶æ®µï¼‰æ‰§è¡Œ setImmediate() çš„å›è°ƒ</li><li>Close callbacksï¼ˆå…³é—­å›è°ƒé˜¶æ®µï¼‰æ‰§è¡Œå…³é—­äº‹ä»¶çš„å›è°ƒï¼Œå¦‚ socket.on(&#39;close&#39;, ...)</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>æ¯ä¸ªé˜¶æ®µçš„å®ä»»åŠ¡æ‰§è¡Œå®Œ â†’</span></span>
<span class="line"><span>    æ‰§è¡Œæ‰€æœ‰ nextTick å›è°ƒ â†’</span></span>
<span class="line"><span>    æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ (Promise)</span></span>
<span class="line"><span>â†’ è¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µ</span></span></code></pre></div><p>æ³¨æ„: æ»¥ç”¨ process.nextTickï¼šä¼šé˜»å¡åç»­é˜¶æ®µï¼ˆé¥¿æ­»å¾ªç¯ï¼‰ã€‚</p><p><strong>ä¼˜å…ˆçº§å…³ç³»</strong><strong>process.nextTick() &gt; Promise.then() &gt; setTimeout() &gt; setImmediate()</strong></p><ul><li>Node çš„äº‹ä»¶å¾ªç¯ç”± libuv å®ç°ï¼Œå¾ªç¯æœ‰ timers â†’ pending â†’ poll â†’ check â†’ close ç­‰é˜¶æ®µã€‚</li><li>å¾®ä»»åŠ¡ï¼š process.nextTickï¼ˆæœ€é«˜ä¼˜å…ˆï¼‰â†’ Promise.thenï¼ˆå¾®ä»»åŠ¡ï¼‰ã€‚</li><li>setImmediate ä¸ setTimeout(0) çš„å…ˆåå–å†³äºä¸Šä¸‹æ–‡ï¼ˆåœ¨ I/O å›è°ƒä¸­ setImmediate ä¼šä¼˜å…ˆï¼‰ã€‚</li><li>çº¿ç¨‹æ±  ç”¨äºæ— æ³•ç«‹å³éé˜»å¡å®Œæˆçš„å·¥ä½œï¼ˆé»˜è®¤çº¿ç¨‹æ•° â‰ˆ4ï¼Œå¯é€šè¿‡ UV_THREADPOOL_SIZE è®¾ç½®ï¼‰ã€‚</li><li>ä¸è¦é˜»å¡ ä¸»çº¿ç¨‹ï¼Œå¿…è¦æ—¶ç”¨ worker_threads æˆ–å¤–éƒ¨æœåŠ¡/è¿›ç¨‹ã€‚</li></ul><!--]--></div></div><h3 id="_3-process-nexttick-ä¸-settimeout-çš„åŒºåˆ«" tabindex="-1">3.process.nextTick ä¸ setTimeout çš„åŒºåˆ« <a class="header-anchor" href="#_3-process-nexttick-ä¸-settimeout-çš„åŒºåˆ«" aria-label="Permalink to â€œ3.process.nextTick ä¸ setTimeout çš„åŒºåˆ«â€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><ul><li>process.nextTick åœ¨å½“å‰äº‹ä»¶å¾ªç¯ç»“æŸæ—¶æ‰§è¡Œ</li><li>setTimeout(fn, 0) åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œ</li><li>nextTick ä¼˜å…ˆçº§æ›´é«˜</li></ul><!--]--></div></div><h3 id="_4-koa-ä¸-express-çš„åŒºåˆ«" tabindex="-1">4.Koa ä¸ Express çš„åŒºåˆ« <a class="header-anchor" href="#_4-koa-ä¸-express-çš„åŒºåˆ«" aria-label="Permalink to â€œ4.Koa ä¸ Express çš„åŒºåˆ«â€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><ol><li>ä¸­é—´ä»¶æœºåˆ¶</li></ol><ul><li>Expressï¼šå•å‘æµåŠ¨ï¼Œä¸­é—´ä»¶é€šè¿‡ next() çº¿æ€§æ‰§è¡Œï¼Œä¸€æ—¦å“åº”ç»“æŸå°±ä¸èƒ½ä¿®æ”¹</li><li>Koaï¼šæ´‹è‘±æ¨¡å‹ï¼Œä¸­é—´ä»¶æ—¢å¯ä»¥å¤„ç†è¯·æ±‚ä¹Ÿå¯ä»¥å¤„ç†å“åº”ï¼Œæ”¯æŒç»Ÿä¸€çš„é”™è¯¯å¤„ç†</li></ul><ol start="2"><li>å¼‚æ­¥å¤„ç†</li></ol><ul><li>Expressï¼šåŸºäºå›è°ƒå‡½æ•°ï¼Œå®¹æ˜“é™·å…¥å›è°ƒåœ°ç‹±ï¼Œå¼‚æ­¥é”™è¯¯å¤„ç†ç›¸å¯¹å¤æ‚</li><li>Koaï¼šåŸºäº Promise å’Œ async/awaitï¼Œä»£ç æ›´ç®€æ´ï¼Œå¼‚æ­¥æµç¨‹æ§åˆ¶æ›´ç›´è§‚</li></ul><ol start="3"><li>ä¸Šä¸‹æ–‡å¯¹è±¡</li></ol><ul><li>Expressï¼šreq å’Œ res æ˜¯åˆ†ç¦»çš„å¯¹è±¡ï¼ŒåŠŸèƒ½ç›¸å¯¹åˆ†æ•£</li><li>Koaï¼šctx ç»Ÿä¸€ä¸Šä¸‹æ–‡ï¼Œå°è£…äº† request å’Œ responseï¼ŒAPI è®¾è®¡æ›´ç®€æ´ä¼˜é›…</li></ul><ol start="4"><li>åŠŸèƒ½å†…ç½®</li></ol><ul><li>Expressï¼šå†…ç½®äº†å¾ˆå¤šä¸­é—´ä»¶ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¼€ç®±å³ç”¨</li><li>Koaï¼šæ ¸å¿ƒåŠŸèƒ½ç²¾ç®€ï¼Œéœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶æ‰©å±•ï¼Œæ›´åŠ çµæ´»</li></ul><ol start="5"><li>è·¯ç”±ç³»ç»Ÿ</li></ol><ul><li>Expressï¼šå†…ç½®äº†å¼ºå¤§çš„è·¯ç”±ç³»ç»Ÿï¼Œæ”¯æŒé“¾å¼è°ƒç”¨</li><li>Koaï¼šè·¯ç”±éœ€è¦é€šè¿‡ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶å®ç°ï¼ˆå¦‚ koa-routerï¼‰</li></ul><p>6.ç¤¾åŒºç”Ÿæ€</p><ul><li>Expressï¼šå†å²æ›´æ‚ ä¹…ï¼Œç¤¾åŒºæ›´æˆç†Ÿï¼Œèµ„æºæ›´ä¸°å¯Œ</li><li>Koaï¼šè¾ƒæ–°ä½†å‘å±•è¿…é€Ÿï¼Œè®¾è®¡æ›´ç°ä»£ï¼Œé€‚åˆæ–°é¡¹ç›®</li></ul><ol start="7"><li>é”™è¯¯å¤„ç†</li></ol><ul><li>Expressï¼šé€šè¿‡ç‰¹æ®Šçš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨ä¼ é€’é”™è¯¯</li><li>Koaï¼šé€šè¿‡ try/catch ä¼˜é›…åœ°å¤„ç†é”™è¯¯ï¼Œç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ›´æ–¹ä¾¿</li></ul><ol start="8"><li>é€‚ç”¨åœºæ™¯</li></ol><ul><li>Expressï¼šé€‚åˆå¿«é€Ÿå¼€å‘ï¼Œç°æœ‰é¡¹ç›®è¿ç§»ï¼Œå›¢é˜Ÿç†Ÿæ‚‰åº¦é«˜</li><li>Koaï¼šé€‚åˆè¿½æ±‚ä¼˜é›…ä»£ç ï¼Œéœ€è¦æ›´å¥½çš„å¼‚æ­¥æµç¨‹æ§åˆ¶çš„åœºæ™¯</li></ul><!--]--></div></div><h3 id="_5-jwt-å¦‚ä½•è‡ªåŠ¨æ›´æ–°-token" tabindex="-1">5.JWT å¦‚ä½•è‡ªåŠ¨æ›´æ–° token <a class="header-anchor" href="#_5-jwt-å¦‚ä½•è‡ªåŠ¨æ›´æ–°-token" aria-label="Permalink to â€œ5.JWT å¦‚ä½•è‡ªåŠ¨æ›´æ–° tokenâ€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>é‡‡ç”¨JWT åŒ Token æ¨¡å¼ï¼šAccess Token + Refresh Token</p><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>ä½œç”¨</th><th>æœ‰æ•ˆæœŸ</th><th>å­˜å‚¨ä½ç½®</th></tr></thead><tbody><tr><td><strong>Access Token</strong></td><td>æ¯æ¬¡è¯·æ±‚æºå¸¦ï¼Œç”¨äºè®¤è¯ç”¨æˆ·èº«ä»½</td><td>çŸ­ï¼ˆå‡ åˆ†é’Ÿ ~ å‡ å°æ—¶ï¼‰</td><td>æµè§ˆå™¨å†…å­˜ / localStorage / cookie</td></tr><tr><td><strong>Refresh Token</strong></td><td>ç”¨äºç”³è¯·æ–°çš„ Access Token</td><td>é•¿ï¼ˆå‡ å¤© ~ å‡ å‘¨ï¼‰</td><td>å®‰å…¨ Cookie / HttpOnly å­˜å‚¨</td></tr></tbody></table><p>å½“å‰ç«¯æ”¶åˆ° 401 ä¸”æ£€æµ‹åˆ°æ˜¯ â€œAccess Token è¿‡æœŸâ€æ—¶, ç”¨Refresh Token è·å–æ–°çš„Access Token</p><p>å‰ç«¯æ€è·¯:</p><ul><li>å°è£…è¯·æ±‚æ‹¦æˆªå™¨ï¼›</li><li>å¦‚æœè¯·æ±‚è¿”å› 401ï¼Œä¸”ä¸æ˜¯åˆ·æ–°è¯·æ±‚ï¼›</li><li>å°è¯•è°ƒç”¨ /auth/refreshï¼›</li><li>åˆ·æ–°æˆåŠŸ â†’ é‡è¯•åŸè¯·æ±‚ï¼›</li><li>åˆ·æ–°å¤±è´¥ â†’ è·³è½¬ç™»å½•ã€‚</li></ul><ol><li><p>æ»‘åŠ¨è¿‡æœŸï¼ˆSliding Expirationï¼‰</p><ul><li>æ¯æ¬¡ç”¨æˆ·è¯·æ±‚æ—¶ï¼Œå¦‚æœ Access Token å¿«è¿‡æœŸï¼Œè‡ªåŠ¨ç­¾å‘æ–° Token(playload å¯ä»¥åŠ è¿‡æœŸæ—¶é—´)</li></ul></li><li><p>ä»¤ç‰Œç‰ˆæœ¬å·æœºåˆ¶</p><ul><li>æ¯ä¸ªç”¨æˆ·åœ¨æ•°æ®åº“ä¸­ç»´æŠ¤ä¸€ä¸ª tokenVersionï¼›å½“åˆ·æ–°æˆ–ç™»å‡ºæ—¶ï¼Œæ›´æ–°ç‰ˆæœ¬å·ï¼›æ—§çš„ Refresh Token å› ç‰ˆæœ¬å·ä¸åŒ¹é…ç«‹å³å¤±æ•ˆã€‚</li></ul></li><li><p>JWT è‡ªåŠ¨ç»­æœŸæ—¶çš„â€œå¹¶å‘åˆ·æ–°å†²çªé—®é¢˜â€</p><ul><li>åŒä¸€æ—¶é—´åªå…è®¸ä¸€æ¬¡åˆ·æ–°æ“ä½œ,å…¶ä»–è¯·æ±‚ç­‰å¾…åˆ·æ–°å®Œæˆåå†ç»§ç»­ã€‚ <ul><li>è¯·æ±‚é˜Ÿåˆ— + åˆ·æ–°é”</li><li>å½“ç¬¬ä¸€ä¸ªè¯·æ±‚æ£€æµ‹åˆ° token è¿‡æœŸæ—¶ï¼š <ul><li>æ ‡è®°ä¸€ä¸ªå…¨å±€å˜é‡ isRefreshing = true</li><li>å‘èµ· /auth/refresh è¯·æ±‚</li><li>å…¶ä»–åŒæ—¶å¤±è´¥çš„è¯·æ±‚ ä¸è¦ç«‹å³åˆ·æ–°ï¼Œè€Œæ˜¯æ”¾è¿›ä¸€ä¸ªé˜Ÿåˆ— pendingRequests</li></ul></li><li>åˆ·æ–°æˆåŠŸåï¼š <ul><li>æ›´æ–°æ–°çš„ tokenï¼›</li><li>ä¾æ¬¡é‡æ”¾ï¼ˆretryï¼‰é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼›</li><li>æ¸…ç©ºé˜Ÿåˆ—ï¼›</li><li>é‡ç½® isRefreshing = falseã€‚</li></ul></li></ul></li><li>åˆ·æ–°ä»¤ç‰Œå¹‚ç­‰åŒ– <ul><li>è‹¥åœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ª refresh token,åç«¯å¯ä»¥æ£€æµ‹å¹¶è¿”å›åŒä¸€ä¸ªæ–° tokenï¼ˆæˆ–æœ€æ–°æœ‰æ•ˆ tokenï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠ¥é”™â€œrefresh token å·²è¢«ä½¿ç”¨â€ã€‚</li></ul></li><li>åˆ·æ–°é™æµ <ul><li>å¯¹åŒä¸€ä¸ªç”¨æˆ·çš„åˆ·æ–°æ“ä½œè®¾ç½®æ—¶é—´é—´éš”é™åˆ¶ï¼ˆä¾‹å¦‚ 5 ç§’å†…åªå…è®¸ä¸€æ¬¡åˆ·æ–°ï¼‰</li></ul></li></ul></li></ol><!--]--></div></div><h3 id="_6-æ‰«æç™»å½•å¦‚ä½•å®ç°" tabindex="-1">6.æ‰«æç™»å½•å¦‚ä½•å®ç°? <a class="header-anchor" href="#_6-æ‰«æç™»å½•å¦‚ä½•å®ç°" aria-label="Permalink to â€œ6.æ‰«æç™»å½•å¦‚ä½•å®ç°?â€">â€‹</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->â–º å±•å¼€<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>PCæµè§ˆå™¨ &lt;â€”â€”â€”&gt; æœåŠ¡å™¨ &lt;â€”â€”â€”&gt; æ‰‹æœºApp</p><ul><li><p>æµè§ˆå™¨æ‰“å¼€ç™»å½•é¡µ</p><ul><li>å‰ç«¯è¯·æ±‚åç«¯ç”Ÿæˆä¸€ä¸ª å”¯ä¸€çš„ç™»å½•äºŒç»´ç </li><li>äºŒç»´ç å†…å®¹é€šå¸¸æ˜¯ä¸€ä¸ª ä¸´æ—¶ login_tokenï¼ˆæˆ–UUIDï¼‰</li><li>äºŒç»´ç å±•ç¤ºç»™ç”¨æˆ·</li></ul></li><li><p>ç”¨æˆ·ç”¨æ‰‹æœºAppæ‰«ç </p><ul><li>App æ‰«æäºŒç»´ç ï¼Œå¾—åˆ° login_token</li><li>App å‘è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒéªŒè¯è¯¥äºŒç»´ç æ˜¯å¦åˆæ³•</li><li>å¦‚æœåˆæ³•ï¼ŒApp æ˜¾ç¤ºæç¤ºã€Œæ˜¯å¦å…è®¸ç™»å½•è¯¥ç½‘é¡µï¼Ÿã€</li></ul></li><li><p>ç”¨æˆ·åœ¨æ‰‹æœºä¸Šç‚¹å‡»ã€Œç¡®è®¤ç™»å½•ã€</p><ul><li>App å¸¦ç€ç™»å½•çŠ¶æ€çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè°ƒç”¨åç«¯æ¥å£</li><li>æœåŠ¡ç«¯ä¿å­˜ï¼šè¯¥ login_token å¯¹åº”çš„ç™»å½•çŠ¶æ€</li></ul></li><li><p>ç½‘é¡µç«¯è½®è¯¢æˆ–WebSocketç­‰å¾…ç™»å½•ç»“æœ</p><ul><li>ç½‘é¡µç«¯æ¯éš”1-2ç§’æŸ¥è¯¢ç™»å½•ç»“æœ</li><li>å¦‚æœå‘ç° login_token å·²è¢«ç¡®è®¤ç»‘å®šç”¨æˆ·ï¼Œåˆ™è¿”å›æˆåŠŸçŠ¶æ€ + ç”¨æˆ·ä¿¡æ¯</li></ul></li><li><p>æµè§ˆå™¨ç™»å½•æˆåŠŸ</p><ul><li>å‰ç«¯æ‹¿åˆ° tokenï¼ˆå¦‚JWTï¼‰ï¼Œå­˜å…¥ Cookie / LocalStorage</li><li>é‡å®šå‘åˆ°é¦–é¡µï¼Œç™»å½•å®Œæˆ</li></ul></li></ul><!--]--></div></div><h3 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-label="Permalink to â€œå…¶ä»–â€">â€‹</a></h3><ul><li><strong>eggjs é»˜è®¤worker å’Œcpuæ ¸å¿ƒæ•°ç›¸åŒ, å¦‚æœæ˜¯ç‰©ç†æœºå™¨,å¯èƒ½éœ€è¦æŒ‡å®šworker æ•°</strong></li><li>ç™»å½•åé¡µé¢å¤šæ¬¡è‡ªåŠ¨é‡å¤åˆ·æ–°å,æ‰æ­£å¸¸è¿›å», a æœåŠ¡é¢å‘çš„token, b æœåŠ¡çŸ­æ—¶é—´åæ‰æ­£å¸¸è®¤è¯,å¯èƒ½æ˜¯2ä¸ªæœºå™¨æ—¶é—´ä¸ä¸€è‡´,å·®å‡ ç§’æˆ–è€…å‡ åç§’</li></ul></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/myKMS/knowledge/base/js.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>js</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/myKMS/knowledge/base/css.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>css</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"ai_index.md\":\"Bf0m5gM2\",\"algorithm_index.md\":\"Djk1iw4J\",\"api-examples.md\":\"DT6A4-_P\",\"book_vue_1.md\":\"D9jihhfd\",\"index.md\":\"2ru8Ebp6\",\"interview_2025.md\":\"KfzA0qoa\",\"interview_code.md\":\"ColE19_b\",\"interview_index.md\":\"DCJEcbIP\",\"knowledge_base_app.md\":\"B-og-tQg\",\"knowledge_base_css.md\":\"QNGXhZBk\",\"knowledge_base_js.md\":\"BKGHn9LP\",\"knowledge_base_nodejs.md\":\"B2Ragjo6\",\"knowledge_browser_http.md\":\"fm7FRw8x\",\"knowledge_browser_index.md\":\"bflL4FMa\",\"knowledge_browser_websecurity.md\":\"DAtXeUcq\",\"knowledge_framework_angular.md\":\"Cj17XPWY\",\"knowledge_framework_app.md\":\"BB41ome5\",\"knowledge_framework_electron.md\":\"CM1OeWvB\",\"knowledge_framework_react.md\":\"tSjM_9wx\",\"knowledge_framework_taro.md\":\"JyVpdrlk\",\"knowledge_framework_vite.md\":\"CRPDAHSI\",\"knowledge_framework_vue.md\":\"CoZvO_xh\",\"knowledge_framework_wx.md\":\"DHlb7cxh\",\"readme.md\":\"Dvz-XUcs\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"çŸ¥è¯†åº“\",\"description\":\"çŸ¥è¯†åº“\",\"base\":\"/myKMS/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"é¢è¯•\",\"link\":\"/interview/code\"},{\"text\":\"æ¡†æ¶\",\"link\":\"/knowledge/framework/react\"},{\"text\":\"æµè§ˆå™¨\",\"link\":\"/knowledge/browser/http\"}],\"sidebar\":[{\"text\":\"åŸºç¡€çŸ¥è¯†\",\"items\":[{\"text\":\"js\",\"link\":\"/knowledge/base/js\"},{\"text\":\"node\",\"link\":\"/knowledge/base/nodejs\"},{\"text\":\"css\",\"link\":\"/knowledge/base/css\"}]},{\"text\":\"interview\",\"items\":[{\"text\":\"2025\",\"link\":\"/interview/2025\"},{\"text\":\"code\",\"link\":\"/interview/code\"},{\"text\":\"å¼€æ”¾æ€§é—®é¢˜\",\"link\":\"/interview/index\"}]},{\"text\":\"æ¡†æ¶\",\"items\":[{\"text\":\"react\",\"link\":\"/knowledge/framework/react\"},{\"text\":\"vue\",\"link\":\"/knowledge/framework/vue\"},{\"text\":\"å·¥ç¨‹åŒ–\",\"link\":\"/knowledge/framework/vite\"},{\"text\":\"electron\",\"link\":\"/knowledge/framework/electron\"}]},{\"text\":\"æµè§ˆå™¨\",\"items\":[{\"text\":\"browser\",\"link\":\"/knowledge/browser/index\"},{\"text\":\"http\",\"link\":\"/knowledge/browser/http\"},{\"text\":\"webå®‰å…¨\",\"link\":\"/knowledge/browser/webSecurity\"}]},{\"text\":\"è¯»ä¹¦ç¬”è®°\",\"items\":[{\"text\":\"vue.js è®¾è®¡ä¸å®è·µ\",\"link\":\"/book/vue_1\"}]},{\"text\":\"ç®—æ³•\",\"items\":[{\"text\":\"æ€»\",\"link\":\"/algorithm/index\"}]},{\"text\":\"AI\",\"items\":[{\"text\":\"ai\",\"link\":\"/ai/index\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/xingyuanlong/myKMS\"}],\"outline\":{\"level\":[2,3],\"label\":\"é¡µé¢å¯¼èˆª\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>