<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web 安全 | 知识库</title>
    <meta name="description" content="知识库">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/myKMS/assets/style.BNxtA7kc.css" as="style">
    <link rel="preload stylesheet" href="/myKMS/vp-icons.css" as="style">
    
    <script type="module" src="/myKMS/assets/app.CkxRFsqJ.js"></script>
    <link rel="preload" href="/myKMS/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/myKMS/assets/chunks/theme.fgKfk125.js">
    <link rel="modulepreload" href="/myKMS/assets/chunks/framework.fGi7qB65.js">
    <link rel="modulepreload" href="/myKMS/assets/knowledge_browser_webSecurity.md.BbNw5VFZ.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-d5bf7c8e><div class="VPNavBar" data-v-d5bf7c8e data-v-8eab0e6d><div class="wrapper" data-v-8eab0e6d><div class="container" data-v-8eab0e6d><div class="title" data-v-8eab0e6d><div class="VPNavBarTitle has-sidebar" data-v-8eab0e6d data-v-d4488dd0><a class="title" href="/myKMS/" data-v-d4488dd0><!--[--><!--]--><!----><span data-v-d4488dd0>知识库</span><!--[--><!--]--></a></div></div><div class="content" data-v-8eab0e6d><div class="content-body" data-v-8eab0e6d><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8eab0e6d><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8eab0e6d data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/interview/code.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>面试</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/knowledge/framework/react.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>框架</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/myKMS/knowledge/browser/http.html" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>浏览器</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8eab0e6d data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-8eab0e6d data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xingyuanlong/myKMS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-8eab0e6d data-v-f953d92f data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/xingyuanlong/myKMS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8eab0e6d data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-8eab0e6d><div class="divider-line" data-v-8eab0e6d></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-5ae341c6><div class="container" data-v-5ae341c6><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5ae341c6><span class="vpi-align-left menu-icon" data-v-5ae341c6></span><span class="menu-text" data-v-5ae341c6>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5ae341c6 data-v-e28a51a6><button data-v-e28a51a6>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-e0eef791><div class="curtain" data-v-e0eef791></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-e0eef791><span class="visually-hidden" id="sidebar-aria-label" data-v-e0eef791> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>基础知识</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/js.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/nodejs.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>node</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/base/css.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>css</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>interview</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/2025.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>2025</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/code.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>code</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/interview/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>开放性问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>框架</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/react.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>react</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/vue.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>vue</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/vite.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>工程化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/framework/electron.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>electron</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>浏览器</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>browser</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/http.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>http</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/knowledge/browser/webSecurity.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>web安全</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>读书笔记</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/book/vue_1.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>vue.js 设计与实践</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>算法</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/algorithm/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>总</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>AI</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/myKMS/ai/index.html" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>ai</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>页面导航</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _myKMS_knowledge_browser_webSecurity" data-v-d668f7cc><div><h1 id="web-安全" tabindex="-1">web 安全 <a class="header-anchor" href="#web-安全" aria-label="Permalink to “web 安全”">​</a></h1><h2 id="_1-xss" tabindex="-1">1.xss <a class="header-anchor" href="#_1-xss" aria-label="Permalink to “1.xss”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><ul><li>XSS: 攻击者往网页里注入恶意脚本（通常是 JavaScript），当用户访问时这些脚本被执行，从而窃取数据、劫持会话或执行恶意操作.主要利用 前端页面缺乏输入/输出校验，把恶意代码“混”进正常页面。</li></ul><p>XSS 的三种常见类型:</p><table tabindex="0"><thead><tr><th>类型</th><th>说明</th><th>举例</th></tr></thead><tbody><tr><td><strong>1. 反射型 XSS（Reflected XSS）</strong></td><td>恶意代码直接拼接在 URL 中，通过点击链接触发。常见于搜索结果页、错误提示页。</td><td><code>https://example.com?q=&lt;script&gt;alert(1)&lt;/script&gt;</code></td></tr><tr><td><strong>2. 存储型 XSS（Stored XSS）</strong></td><td>攻击代码被存储到数据库或文件中，用户访问页面时，恶意代码被从服务器取出并执行。</td><td>在留言板输入 <code>&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;</code></td></tr><tr><td><strong>3. DOM 型 XSS（DOM-based XSS）</strong></td><td>攻击代码在前端 JavaScript 中被动态插入页面(前端代码直接把 URL 或输入插入到 DOM，导致执行恶意脚本。)</td><td>前端执行 <code>innerHTML = location.hash</code> 导致脚本注入</td></tr></tbody></table><p>XSS 能干什么: 窃取 Cookie / LocalStorage / Token;劫持用户会话（伪造请求、冒充身份）;插入钓鱼页面，引导用户输入敏感信息;挂马（加载恶意脚本，挖矿、键盘监听）;DDoS（利用浏览器不断发请求）</p><ul><li>防御: <ul><li>输入过滤 &amp; 输出转义(对用户输入进行 HTML 转义);</li><li>使用安全 API; <ul><li>使用 textContent / value / setAttribute（安全的 API）替代 innerHTML。</li></ul></li><li>CSP（内容安全策略）;</li><li>HTTP 头 Content-Security-Policy 限制页面能执行的脚本来源。</li><li>HttpOnly Cookie</li><li>当必须允许用户提交 HTML（富文本编辑器）时，不要自己写正则，使用成熟库：DOMPurify（OWASP 推荐）。配置白名单和去除事件处理器（on*）、script、style、iframe 等潜在危险元素</li><li>永远不要把 location.hash / location.search 等“未经验证”的值直接 innerHTML 或 eval。</li><li>使用 DOMPurify 对插入的 HTML 做消毒。</li></ul></li></ul><p><strong>XSS 本质是“用户端执行了攻击者注入的脚本”。防御核心是：不信任输入 → 严格验证 → 安全输出，再辅以 CSP 和安全 cookie 设置。</strong></p><!--]--></div></div><h2 id="_2-csrf" tabindex="-1">2.csrf <a class="header-anchor" href="#_2-csrf" aria-label="Permalink to “2.csrf”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>攻击者诱导用户在已登录的站点上发起非本意请求，从而在用户的身份权限下执行操作。</p><ul><li><ol><li>用户已登录目标网站，并有有效 cookie 或认证信息。</li></ol></li><li><ol start="2"><li>用户在其他站点点击恶意链接或加载攻击页面。</li></ol></li><li><ol start="3"><li>浏览器会自动携带 cookie，目标网站无法区分请求是否本意。</li></ol></li></ul><p>典型攻击场景:</p><ul><li>用户登录银行网站，保留 session cookie。</li><li>攻击者在另一个网站放了一个表单或 <code>&lt;img&gt; / &lt;script&gt;</code> 请求到银行的转账接口（POST/GET）。</li><li>用户在登录状态下访问攻击者页面，浏览器自动携带银行 cookie，银行服务器执行了转账请求。</li></ul><p>防御手段:</p><ul><li><p>CSRF Token（同步/双向校验）—— 最常用且安全</p><ul><li>服务端为用户会话生成一个随机 token（例如放在 session 中），页面表单或 AJAX 请求必须提交该 token，服务端验证 token 与 session 中的一致性。</li></ul></li><li><p>SameSite Cookie</p><ul><li>set-Cookie: session=...; SameSite=Strict 或 SameSite=Lax（或 None; Secure 当跨站时）。</li><li>Strict 最严格（跨站导航也不会携带），Lax 对 GET 跨站顶级导航允许但对多数跨站 POST/iframe 请求不携带 cookie，能防很多自动请求类 CSRF。</li></ul></li><li><p>验证 Origin / Referer Header</p><ul><li>对于改变状态的请求（POST/PUT/DELETE），服务端检查 Origin 或 Referer 是否是受信任域</li></ul></li><li><p>Double Submit Cookie（双提交 Cookie）</p><ul><li>服务端发一个 CSRF token 到 cookie，客户端 JS 将该 token 读取并放到请求头或请求体中；服务端验证 cookie 和请求中 token 是否一致</li></ul></li><li><p>禁止危险 HTTP 方法或只允许 JSON Content-Type; 避免敏感操作用 GET;</p></li><li><p>最小权限与敏感操作的二次确认</p></li></ul><p>Cookie 自动携带，容易被 CSRF 利用；Token 需 JS 手动附加 Header，跨站点 JS 无法设置 → 自然防止 CSRF，但要防 XSS 窃取。</p><!--]--></div></div><h2 id="_3-点击劫持" tabindex="-1">3.点击劫持 <a class="header-anchor" href="#_3-点击劫持" aria-label="Permalink to “3.点击劫持”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>点击劫持是攻击者把目标站点页面嵌入到一个透明或不可见的 iframe（或覆盖层）里，并在上面放置诱导用户点击的元素（按钮、图片等）。用户以为点击了攻击页面的内容，实际上是在对被嵌入的受信任页面进行操作（例如授权、付款、修改设置等）。 本质是“把用户的点击重定向到受信任页面的 UI 元素”，属于 UI 重定向/社会工程类攻击。</p><p>典型攻击场景: 1.受害者登录到 bank.example.com，保持登录 cookie。</p><p>2.攻击者页面在自己的站点上嵌入 bank.example.com 的转账页面作为透明 iframe，并在其上放置「点我领红包」按钮。</p><p>3.用户点击“红包”，实际触发 iframe 内的“确认转账”按钮 -&gt; 转账成功（浏览器自动带 cookie）。</p><p>防御手段:</p><ul><li><p>在服务器端设置 HTTP header：Content-Security-Policy: frame-ancestors</p><ul><li>只允许来自同源或指定域的页面把本站嵌入 <code>&lt;frame&gt;/&lt;iframe&gt;/&lt;object&gt;</code></li></ul></li><li><p>设置 X-Frame-Options</p><ul><li>指定是否被被嵌入</li></ul></li><li><p>对必须被嵌入的页面，严格限制来源并最小化权限</p></li><li><p>对敏感操作做“用户意愿”二次确认</p></li><li><p>服务器端对关键请求做额外校验</p></li></ul><!--]--></div></div><h2 id="_4-sql注入" tabindex="-1">4.sql注入 <a class="header-anchor" href="#_4-sql注入" aria-label="Permalink to “4.sql注入”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>SQL 注入 是攻击者把恶意 SQL 片段注入到应用构建的 SQL 查询中，借此改变查询逻辑、窃取/修改/删除数据库数据，甚至取得数据库后台权限。<strong>根本原因通常是把不可信输入直接拼到 SQL 字符串里执行。</strong></p><p>防御原则:</p><ul><li>参数化查询 / 预处理语句（Prepared Statements） — 首选。</li><li>最小权限数据库账户</li><li>严格输入校验和白名单</li><li>避免基于字符串拼接构建 SQL</li></ul><!--]--></div></div><h2 id="_5-ddos" tabindex="-1">5.ddos <a class="header-anchor" href="#_5-ddos" aria-label="Permalink to “5.ddos”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p><strong>DDoS 是攻击者用大量分布式流量或资源请求耗尽目标的带宽、CPU、连接数或应用资源，导致服务不可用。</strong> 攻击类型常见：流量耗尽（Volumetric，如 UDP 放大）、协议耗尽（SYN flood、TCP state exhaustion）、应用层耗尽（HTTP request floods、slowloris、expensive endpoints）。</p><p>目标——防护要解决的三件事</p><ul><li>快速检测（尽早发现）</li><li>自动缓解（在边缘/网络层拦截恶意流量）</li><li>稳定服务可用性（退化而不是崩溃，优先保证关键路径）</li></ul><p>全栈防护策略:</p><ul><li>边缘 + CDN / DDoS 护盾 <ul><li>使用Cloudflare 等</li></ul></li><li>网络层与骨干</li><li>负载均衡 + 弹性扩缩</li><li>WAF / 应用层规则</li><li>速率限制与连接控制（应用与TCP层）</li><li>黑白名单与地理/ASN 过滤</li><li>检测与监控</li><li>运维与应急流程</li></ul><!--]--></div></div><h2 id="_6-爬虫" tabindex="-1">6. 爬虫 <a class="header-anchor" href="#_6-爬虫" aria-label="Permalink to “6. 爬虫”">​</a></h2><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><ul><li><p>良性爬虫：搜索引擎（Googlebot、Bingbot）、站点监控、归档服务（Wayback）等。通常遵守 <strong>robots.txt</strong>、标识自己 User‑Agent。</p></li><li><p>恶意 / 滥用爬虫：数据抓取（剽窃内容/价格/邮件）、刷流量、库存抢购、账号暴力破解、指纹探测、内容镜像等。常规目标：高并发、绕过付费或规则、占用资源。</p></li></ul><p>检测爬虫:</p><ul><li>请求速率异常（短时间大量请求、重复 pattern）。</li><li>单 IP 或 IP 段极高请求数；高并发连接。</li><li>不执行 JS（没有执行由 JS 注入的动态 token）、不接受或不返回 cookie。</li><li>常见或可疑 User-Agent（空 UA / 非主流 UA / 已知爬虫 UA 但伪造）。</li><li>不加载图片、样式、字体，只请求 HTML/API。</li><li>请求头异常（缺少常见浏览器头，如 Accept-Language、Sec-* 系列）。</li><li>相同行为来自大量不同 IP（分布式采集）。</li><li>执行路径规则：深层分页、批量ID遍历、只访问产品详情而非主页。 这些信号单独可能是误报，组合在一起更有可信度。</li></ul><p>防御总体策略（分层防护）:</p><ul><li>边缘与流量过滤 <ul><li>CDN / WAF（Cloudflare、Akamai、AWS WAF 等）做第一道防线：IP 黑名单、国家/ASN 屏蔽、速率限制、JS challenge。</li></ul></li><li>速率限制 &amp; 并发控制</li><li>身份与访问控制</li><li>行为分析与指纹</li><li>人机验证/验证码</li><li>混淆 HTML / JS</li><li>法律与条款</li></ul><p>前端与反爬虫:</p><ul><li><p>font-face拼凑式</p><ul><li>页面使用了font-face定义了字符集，并通过unicode去映射展示。也就是说，除去图像识别，必须同时爬取字符集，才能识别出数字。</li></ul></li><li><p>background拼凑式</p><ul><li>与font的策略类似。数字其实是图片，根据不同的background偏移，显示出不同的字符。</li></ul></li><li><p>字符穿插式</p><ul><li>文章里，穿插了各种迷之字符，并且通过样式把这些字符隐藏掉。</li></ul></li><li><p>伪元素隐藏式</p><ul><li>把关键的信息，做到了伪元素的content里</li></ul></li><li><p>元素定位覆盖式</p><ul><li>关键信息, 通过不同元素不同的定位不同层的覆盖, 页面上显示正确的样式</li></ul></li><li><p>字符分割式</p><ul><li>真假混合</li></ul></li><li><p>字符集替换式</p><ul><li>重新定义了字符集，html 与实际显示不一致</li></ul></li><li><p>html2canvas</p></li><li><p>User-Agent 检测;IP 频率检测;Cookie/Session 验证;JS 验证;Referer 检测;请求行为分析; referen 检查页面: 动态渲染 / JS 加密;Canvas / 图片验证码渲染;混淆 HTML / JS;验证码 / 人机验证;</p></li></ul><!--]--></div></div><h3 id="_7-文件上传漏洞" tabindex="-1">7.文件上传漏洞 <a class="header-anchor" href="#_7-文件上传漏洞" aria-label="Permalink to “7.文件上传漏洞”">​</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>文件上传漏洞会导致:</p><ul><li>远程代码执行（RCE）：上传可执行脚本（.php/.jsp/.asp/.jspx/.aspx）并触发执行。</li><li>任意文件覆盖 / 覆盖重要文件：上传的文件覆盖现有文件导致服务异常或后门。</li><li>敏感数据泄露：上传包含敏感信息或把上传目录暴露到外网。</li><li>恶意文件分发 / 恶意二进制：传播木马、挖矿程序、恶意图片等给其他用户。</li><li>存储耗尽 / DoS：大量大文件上传耗尽磁盘或带宽。</li><li>安全绕过（MIME/扩展绕过）</li></ul><p>常见攻击向量（列举）:</p><ul><li>上传 .php 并通过 /uploads/shell.php 访问 -&gt; RCE。</li><li>上传 .jpg 文件但实际是 PHP（混淆扩展或双扩展 like shell.jpg.php）并被服务器当作脚本执行。</li><li>在 filename 中使用 ../ 路径穿越覆盖关键文件（若服务端未规范化路径）。</li><li>通过大文件或并发上传耗尽磁盘 / 触发资源耗尽。</li><li>利用上传的 SVG（包含 JS）进行 XSS。</li><li>上传带有恶意 EXIF 的图片或特殊格式触发后端解析库漏洞。</li></ul><p>防御原则:</p><ul><li>最小信任：客户端输入（文件名、MIME、大小、扩展）均不可信。</li><li>白名单策略：只允许明确需要的一小部分扩展与 MIME（优于黑名单）。</li><li>多层检测：扩展名 + MIME 类型 + 文件头/魔数（magic bytes） + 内容扫描（AV/沙箱） + 元数据检查。</li><li>隔离存储：上传存储在不可执行、非 web 根目录的位置，或使用对象存储（S3）并通过后端签名/代理访问。</li><li>最小权限与不可执行：上传目录不可执行（noexec），文件系统权限最小化。</li><li>签名/校验与短期 URL：采用 signed URLs / presigned upload + 后端审核或触发异步扫描。</li><li>流式处理 + 限制：限制最大文件大小、文件类型、并发上传数、速率。</li><li>后续处理：异步病毒扫描、图像重编码（重新生成缩略图），移除可执行元数据。</li><li>日志与告警：所有上传活动审计、异常触发报警。</li></ul><!--]--></div></div><h3 id="_8-中间人攻击" tabindex="-1">8. 中间人攻击 <a class="header-anchor" href="#_8-中间人攻击" aria-label="Permalink to “8. 中间人攻击”">​</a></h3><div class="vp-collapse" data-v-4585a904><div class="vp-collapse__summary" data-v-4585a904><!--[-->► 展开<!--]--></div><div class="vp-collapse__content" style="display:none;" data-v-4585a904><!--[--><p>定义：攻击者在通信双方之间拦截、篡改或监听网络流量，使双方以为是在直接通信，但实际上流量被中间人读取或修改。</p><p>危害：窃取凭证、会话劫持、注入恶意脚本/内容、篡改数据、绕过认证、下发恶意资源等。</p><p>常见的中间人攻击( MITM 变种)</p><ul><li>被动监听</li><li>主动中间人</li><li>ARP Spoofing / L2 欺骗</li><li>DNS 欺骗 / 劫持</li><li>SSL/TLS 中间人（伪造证书 / 不安全降级)</li><li>恶意代理 / 透明代理 / 企业中间人</li><li>边缘 CDN / 插件污染</li></ul><p>防御与缓解措施:</p><ul><li>始终使用 HTTPS（TLS）</li><li>启用 TLS1.3，关闭过时协议/算法</li><li>HSTS（HTTP Strict Transport Security）</li><li>启用 HTTP/2 或 HTTP/3（QUIC）</li><li>Content Security Policy (CSP) — 防止被注入的脚本执行</li><li>安全 Cookie 配置</li><li>禁止混合内容（Mixed Content） — 所有资源必须通过 HTTPS 加载</li><li>减少在客户端存储敏感信息</li></ul><!--]--></div></div><p>最重要是: <strong>安全的制度, 安全的管理</strong></p><p>如禁止把密码设置为: admin/123456 等</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/myKMS/knowledge/browser/http.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>http</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/myKMS/book/vue_1.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>vue.js 设计与实践</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"ai_index.md\":\"DQfW4HRO\",\"algorithm_index.md\":\"DaoRZT4R\",\"api-examples.md\":\"COM88OYJ\",\"book_vue_1.md\":\"CwVdZFby\",\"index.md\":\"BrSpO5nX\",\"interview_2025.md\":\"DdCUXctU\",\"interview_code.md\":\"Cxzw4P1l\",\"interview_index.md\":\"CDEOFYJy\",\"knowledge_base_css.md\":\"DgxWnDQ3\",\"knowledge_base_js.md\":\"B4na8DhB\",\"knowledge_base_nodejs.md\":\"Ba217klP\",\"knowledge_browser_http.md\":\"CfaBAt2E\",\"knowledge_browser_index.md\":\"BndzSVVy\",\"knowledge_browser_websecurity.md\":\"BbNw5VFZ\",\"knowledge_framework_angular.md\":\"Cps40Z7d\",\"knowledge_framework_electron.md\":\"HGyoFMrJ\",\"knowledge_framework_react.md\":\"C3iIru5f\",\"knowledge_framework_vite.md\":\"DnVbzkeU\",\"knowledge_framework_vue.md\":\"CcUlofwe\",\"readme.md\":\"BWneGpTT\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"知识库\",\"description\":\"知识库\",\"base\":\"/myKMS/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"面试\",\"link\":\"/interview/code\"},{\"text\":\"框架\",\"link\":\"/knowledge/framework/react\"},{\"text\":\"浏览器\",\"link\":\"/knowledge/browser/http\"}],\"sidebar\":[{\"text\":\"基础知识\",\"items\":[{\"text\":\"js\",\"link\":\"/knowledge/base/js\"},{\"text\":\"node\",\"link\":\"/knowledge/base/nodejs\"},{\"text\":\"css\",\"link\":\"/knowledge/base/css\"}]},{\"text\":\"interview\",\"items\":[{\"text\":\"2025\",\"link\":\"/interview/2025\"},{\"text\":\"code\",\"link\":\"/interview/code\"},{\"text\":\"开放性问题\",\"link\":\"/interview/index\"}]},{\"text\":\"框架\",\"items\":[{\"text\":\"react\",\"link\":\"/knowledge/framework/react\"},{\"text\":\"vue\",\"link\":\"/knowledge/framework/vue\"},{\"text\":\"工程化\",\"link\":\"/knowledge/framework/vite\"},{\"text\":\"electron\",\"link\":\"/knowledge/framework/electron\"}]},{\"text\":\"浏览器\",\"items\":[{\"text\":\"browser\",\"link\":\"/knowledge/browser/index\"},{\"text\":\"http\",\"link\":\"/knowledge/browser/http\"},{\"text\":\"web安全\",\"link\":\"/knowledge/browser/webSecurity\"}]},{\"text\":\"读书笔记\",\"items\":[{\"text\":\"vue.js 设计与实践\",\"link\":\"/book/vue_1\"}]},{\"text\":\"算法\",\"items\":[{\"text\":\"总\",\"link\":\"/algorithm/index\"}]},{\"text\":\"AI\",\"items\":[{\"text\":\"ai\",\"link\":\"/ai/index\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/xingyuanlong/myKMS\"}],\"outline\":{\"level\":[2,3],\"label\":\"页面导航\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>