### 小程序的架构

```
┌───────────────────────────────────────────────┐
│                  小程序运行环境               │
│-----------------------------------------------│
│      JS 逻辑层（App Service）                 │
│      - 业务逻辑、数据管理、接口请求           │
│      - 运行在独立的 JS 引擎（如 V8）          │
│-----------------------------------------------│
│      渲染层（View 层 / WebView）              │
│      - 各页面由独立的 WebView 渲染            │
│      - WXML + WXSS 负责结构和样式             │
│-----------------------------------------------│
│      系统层（Native / API 层）                │
│      - 提供原生能力：文件、网络、地理位置等   │
└───────────────────────────────────────────────┘



```

小程序并不是直接用 DOM，而是采用「逻辑层（JS） ↔ 渲染层（WebView）」的分离架构：


| 模块                   | 运行环境        | 职责                    |
| -------------------- | ----------- | --------------------- |
| **逻辑层（App Service）** | JSCore / V8 | 执行业务逻辑、调用 API、操作数据    |
| **渲染层（View 层）**      | WebView     | 渲染页面结构（WXML）和样式（WXSS） |

```

App Service(JS逻辑)
     │
     │ JSON / bridge
     ▼
View 层(WebView)


```

JS 逻辑层修改数据 → 通过 数据桥（bridge） 传给渲染层；

渲染层通过 数据绑定机制 更新界面；

用户操作（点击、滑动） → 事件再传回 JS 层


前后端交互:
```
用户操作
  ↓
渲染层触发事件
  ↓
逻辑层接收 (JS)
  ↓
调用 wx.request / wx.cloud / WebSocket
  ↓
后端服务响应 (JSON 数据)
  ↓
逻辑层 setData 更新状态
  ↓
渲染层数据更新并刷新 UI

```

