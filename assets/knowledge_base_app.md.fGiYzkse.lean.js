import{_ as t,I as a,o as i,c as o,j as l,a as u,J as p,w as s}from"./chunks/framework.Byv6qxkR.js";const f=JSON.parse('{"title":"小程序","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge/base/app.md","filePath":"knowledge/base/app.md"}'),r={name:"knowledge/base/app.md"};function d(m,n,c,S,V,x){const e=a("Collapse");return i(),o("div",null,[n[1]||(n[1]=l("h1",{id:"小程序",tabindex:"-1"},[u("小程序 "),l("a",{class:"header-anchor",href:"#小程序","aria-label":"Permalink to “小程序”"},"​")],-1)),n[2]||(n[2]=l("h3",{id:"_1-vue-编译到小程序等原理",tabindex:"-1"},[u("1. vue 编译到小程序等原理 "),l("a",{class:"header-anchor",href:"#_1-vue-编译到小程序等原理","aria-label":"Permalink to “1. vue 编译到小程序等原理”"},"​")],-1)),p(e,null,{default:s(()=>[...n[0]||(n[0]=[l("p",null,"Vue 本身是一个 前端框架，它的运行环境是浏览器，依赖 DOM API。小程序环境（如微信小程序）是 非浏览器环境，没有 DOM，取而代之的是 小程序的组件体系（如 view, text, image 等）和 小程序 JS 运行环境（WXML + WXSS + JS）。",-1),l("p",null,"核心原理:",-1),l("ol",null,[l("li",null,"模板编译")],-1),l("ul",null,[l("li",null,[u("Vue 的模板（"),l("code",null,"<template>"),u("）最终会被编译成 渲染函数。")]),l("li",null,[u("在小程序环境下： "),l("ul",null,[l("li",null,"Vue 模板会被转换成 小程序的 WXML。"),l("li",null,[u("Vue 的指令（v-if, v-for, v-bind 等）会被转换成对应的小程序指令： "),l("ul",null,[l("li",null,"v-for → wx:for"),l("li",null,"v-if → wx:if"),l("li",null,"v-bind:xxx → 对应绑定写法")])])])]),l("li",null,"这个过程就是 模板转换器（template compiler）")],-1),l("ol",{start:"2"},[l("li",null,"组件映射")],-1),l("ul",null,[l("li",null,[l("p",null,"Vue 组件 → 小程序自定义组件")]),l("li",null,[l("p",null,"需要做的事情："),l("ul",null,[l("li",null,"生成 JSON 配置文件（小程序每个组件/页面需要 component.json 或 page.json）"),l("li",null,"生成 WXML 模板"),l("li",null,"生成 JS 逻辑文件，小程序的 JS 运行环境有限，所以需要把 Vue 的响应式、事件等改写成小程序的方式。")])])],-1),l("ol",{start:"3"},[l("li",null,"响应式系统适配")],-1),l("ul",null,[l("li",null,[l("p",null,"Vue 通过 Proxy/Observer 做响应式，渲染到 DOM。")]),l("li",null,[l("p",null,"小程序没有 DOM，需要手动触发更新。")]),l("li",null,[l("p",null,"所以 Vue-to-mini-program 框架通常会："),l("ul",null,[l("li",null,"在数据变动时调用 setData（小程序的状态更新 API）"),l("li",null,"setData 是小程序的核心，更新 WXML"),l("li",null,"Vue 响应式的数据变动 → 自动映射到 setData 调用")])])],-1),l("p",null,"注意：setData 有性能限制（不要更新太大对象），所以很多框架会 做脏检查或数据扁平化。",-1),l("ol",{start:"4"},[l("li",null,"生命周期映射")],-1),l("p",null,"编译流程概览:",-1),l("ol",null,[l("li",null,"解析 SFC（Single File Component）")],-1),l("ul",null,[l("li",null,"template → AST"),l("li",null,"script → JS"),l("li",null,"style → CSS / WXSS")],-1),l("ol",{start:"2"},[l("li",null,"模板编译")],-1),l("ul",null,[l("li",null,"AST → WXML"),l("li",null,"指令和事件转换（v-on → bindtap）")],-1),l("ol",{start:"3"},[l("li",null,"逻辑处理")],-1),l("ul",null,[l("li",null,"Vue 响应式系统 → 小程序 data + setData"),l("li",null,"方法 → 小程序 JS 方法绑定")],-1),l("ol",{start:"4"},[l("li",null,"样式转换")],-1),l("ul",null,[l("li",null,"CSS → WXSS"),l("li",null,"Scoping / 样式命名空间处理")],-1),l("ol",{start:"5"},[l("li",null,"输出小程序目录")],-1),l("ul",null,[l("li",null,"page.js, page.wxml, page.wxss, page.json"),l("li",null,"component.js, component.wxml, component.wxss, component.json")],-1),l("ol",{start:"6"},[l("li",null,"打包")],-1),l("ul",null,[l("li",null,"工具（webpack / vite / cli）打包 JS"),l("li",null,"输出小程序可识别的目录结构")],-1),l("table",{tabindex:"0"},[l("thead",null,[l("tr",null,[l("th",null,"框架"),l("th",null,"原理与特点")])]),l("tbody",null,[l("tr",null,[l("td",null,"mpvue"),l("td",null,"Vue 2 → 小程序，用 Vue 的 render + setData")]),l("tr",null,[l("td",null,"uni-app"),l("td",null,"支持 Vue 2/3，跨端输出（小程序、H5、App），模板和指令转换 + API 封装")]),l("tr",null,[l("td",null,"Taro"),l("td",null,"React 风格 → 多端小程序，核心是抽象组件 + 生命周期 + API 适配")]),l("tr",null,[l("td",null,"Vue3-mini"),l("td",null,"Vue3 composition API + 响应式 → setData")])])],-1),l("p",null,"核心就是三件事：",-1),l("ul",null,[l("li",null,[l("p",null,"模板编译 → Vue template → WXML")]),l("li",null,[l("p",null,"响应式适配 → Vue 响应式 → 小程序 setData")])],-1),l("p",null,"-生命周期和 API 映射 → Vue 生命周期 +事件 → 小程序生命周期+事件",-1),l("p",null,"⚡ 核心瓶颈：",-1),l("ul",null,[l("li",null,[l("p",null,"setData 性能")]),l("li",null,[l("p",null,"样式隔离")]),l("li",null,[l("p",null,"组件递归 / 动态组件")])],-1)])]),_:1})])}const b=t(r,[["render",d]]);export{f as __pageData,b as default};
