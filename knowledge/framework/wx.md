

## 🧠 一、生命周期与架构机制

### **1️⃣ 小程序的启动流程是什么？从打开到渲染第一个页面发生了什么？**

**考点：** 启动机制、AppService 与 WebView 分层、渲染进程通信

**答题要点：**

* 小程序加载 `app.js` → 注册全局 App；
* 按路径加载页面 JSON / WXML / WXSS；
* 创建逻辑层（JSCore）；
* 创建视图层（WebView）；
* 逻辑层与视图层通过 **bridge 通信**；
* 初始化数据后，调用 `onLaunch` → `onShow` → 页面 `onLoad` → `onReady`。

> **进阶问法：** 为什么首次打开小程序比二次打开慢？
> **答：** 首次加载需要网络请求资源，二次打开可走缓存（代码包 + 启动冷启动优化）。

---

## ⚙️ 二、数据通信与性能

### **2️⃣ 为什么频繁 setData 会卡？怎么优化？**

**考点：** 数据传输机制、性能瓶颈、虚拟列表

**要点：**

* `setData` 会通过 JSBridge 发送 JSON 数据；
* 序列化 + 跨线程通信代价高；
* 高频或大数据量更新（>100KB）会导致掉帧；
* 优化：合并更新、虚拟列表、局部状态、节流/防抖、拆组件。

---

## 📦 三、渲染机制与组件化

### **3️⃣ 小程序组件通信有哪些方式？**

**考点：** 组件解耦与架构设计

**答题要点：**

* 父子通信：`properties` + `triggerEvent`
* 页面与组件通信：`selectComponent`
* 跨组件通信：`EventChannel`、全局状态（Vuex / Pinia / MobX）
* 兄弟组件通信：事件总线、全局 store、或通过父组件中转
* 第三方封装：`mitt`、`PubSubJS` 等

---

### **4️⃣ WXML 渲染机制和 diff 更新原理？**

**考点：** 虚拟 DOM 概念、小程序框架层 Diff 策略

**要点：**

* 小程序维护虚拟节点树；
* setData 触发 diff；
* 仅变更差异部分节点；
* 渲染层异步更新；
* 和 React Diff 类似但通信层不同（跨线程）。

---

## 🧩 四、框架与架构设计

### **5️⃣ 你如何设计一个可复用的表单组件？**

**考点：** 通用组件化、可配置性

**要点：**

* 使用 `component`；
* 通过 `properties` 接收字段配置；
* 通过 `triggerEvent('change', value)` 向外传值；
* 支持校验（rules）、默认值、slot 自定义；
* 可通过配置驱动表单渲染。

> **加分答法：** 封装统一的 `Form` 容器 + `FormItem` 子组件，支持 JSON Schema 动态渲染。

---

## 🧭 五、网络与缓存机制

### **6️⃣ 小程序中请求并发限制是多少？如何突破？**

**考点：** 网络层限制与请求队列管理

**答题要点：**

* 同域名并发请求数限制为 **10 个**；
* 超出会被挂起；
* 优化方式：

  * 请求队列；
  * 请求合并；
  * 延迟加载；
  * WebSocket 保持长连接。

---

### **7️⃣ 本地缓存机制与限制？**

**考点：** `wx.setStorage` 与容量限制

**答题要点：**

* 同步与异步 API：`wx.setStorageSync`、`wx.getStorageSync`
* 单个 key 不能超过 **1MB**；
* 总容量约 **10MB**；
* 超出容量可能失败；
* 优化方式：索引表、分片缓存、清理无用数据。

---

## 🧰 六、运行环境与兼容性

### **8️⃣ 小程序中 JS 运行环境与浏览器的主要区别？**

**考点：** JSCore 特性、API 缺失

**要点：**

* 小程序不运行在浏览器；
* 没有 DOM、window、document；
* 不支持 BOM API（如 alert、localStorage）；
* 使用 JSCore；
* 使用微信提供的 API（wx.*）；
* 没有 ES 模块系统（需构建时打包）。

---

## 🧩 七、跨端与框架对比

### **9️⃣ 说说你对 Taro、uni-app、原生小程序的理解与对比**

**考点：** 跨端方案、框架优缺点

| 框架                    | 优点                     | 缺点              |
| --------------------- | ---------------------- | --------------- |
| **原生小程序**             | 原生性能好，API 完整           | 开发效率低，生态小       |
| **Taro**              | React 语法，跨端（H5、RN、小程序） | 构建复杂，部分组件兼容性需适配 |
| **uni-app**           | Vue 语法，生态大             | 编译层较厚，调试成本高     |
| **Remax / Chameleon** | 支持 React/Vue 同构        | 维护者少            |

---

## 🧮 八、性能与工程优化

### **10️⃣ 你做过哪些小程序性能优化？从哪些维度入手？**

**考点：** 全面性能优化策略（开发者工具面板 + 架构优化）

**答题要点（可分层答）**

#### 🔹 结构层

* 分包加载（主包 < 2MB）
* 独立分包、预下载包

#### 🔹 渲染层

* 虚拟列表、懒加载、骨架屏
* 减少 setData 次数和体积
* 合理使用 scroll-view 而不是 page scroll

#### 🔹 网络层

* CDN 静态资源；
* 请求合并；
* 缓存（ETag、Storage）；
* 异步懒加载。

#### 🔹 构建层

* 开启压缩、Tree-Shaking；
* 减少无用依赖；
* 利用插件如 webpack-bundle-analyzer。

---

## 💡 九、附加 Bonus（高级加分题）

> 🔸「请你画出微信小程序逻辑层和渲染层通信架构图」
> 🔸「说说你在 Taro + 小程序中遇到的兼容性问题，以及怎么调试」
> 🔸「如何设计一个跨小程序平台的业务组件库？」
> 🔸「微信小程序中 JSBridge 是如何实现通信的？」

---

## 📘 想要更进一步？

我可以帮你把这些题整理成一份 **《微信小程序高级面试笔记》Markdown 可打印版**（包含：

* 面试官考点说明
* 答题要点框架
* 可扩展回答模板）

是否需要我帮你生成这一版？（可直接用于面试复习或打印笔记）
